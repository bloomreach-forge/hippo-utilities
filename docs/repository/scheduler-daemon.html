<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 24 Feb 2017
 | Rendered using Hippo Forge Maven Skin 1.04.00 based on Apache Maven Fluido Skin
-->
<!--[if lt IE 7]><html id="ie6" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 7]><html id="ie7" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 8]><html id="ie8" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if IE 9]><html id="ie9" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if !IE]>--><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--<![endif]-->

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <meta name="Date-Revision-yyyymmdd" content="20170224"/>
                <meta http-equiv="Content-Language" content="en"/>
        <title>Hippo Forge Utilities plugin - 
    Hippo Utilities Repository - Scheduler Daemon</title>
    <link rel="stylesheet" href="../css/forge-maven-skin-syntaxhighlighter-1.04.00.min.css"/>
    <link rel="stylesheet" href="../css/forge-maven-skin-1.04.00.min.css"/>
    <link rel="stylesheet" href="../css/site.css"/>
    <link rel="stylesheet" href="../css/print.css" media="print"/>

        
    <script type="text/javascript" src="../js/forge-maven-skin-syntaxhighlighter-1.04.00.min.js"></script>
    <script type="text/javascript" src="../js/forge-maven-skin-1.04.00.min.js"></script>

    
            </head>
    <body>

        
    
    
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="header">
                <div id="logo">
                    <a href="http://www.onehippo.com">
                        <img src="../images/hipposkin/hippo-logo.png" alt="Hippo Logo" />
                    </a>
                </div>

                <h1>
                                            Hippo Forge Utilities plugin
                    
                </h1>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row-fluid">
            <div id="breadcrumbs" class="clearfix">
                <ul class="breadcrumb">
                                
                                        
                            <li id="publishDate">Last Published: 24 Feb 2017</li>
                                                                                                                                                </ul>

                <div class="links">
                    <a href="https://www.onehippo.com">Onehippo.com</a>
                    <a href="https://www.onehippo.org">Onehippo.org</a>
                </div>
            </div>
        </div>



            
    <div class="row-fluid">
        <div id="leftColumn" class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                                        <li class="nav-header">Home</li>
                                                           
        <li>
    
                                                <a href="../index.html" title="Home">
                    <i class="none"></i>
                Home</a>
                    </li>
                               
        <li>
    
                                                <a href="../release-notes.html" title="Release Notes">
                    <i class="none"></i>
                Release Notes</a>
                    </li>
                               
        <li>
    
                                                <a href="../install.html" title="Installation">
                    <i class="none"></i>
                Installation</a>
                    </li>
                                                            <li class="nav-header">Commons module</li>
                                                           
        <li>
    
                                                <a href="../commons/annotationutil.html" title="Annotation Utility">
                    <i class="none"></i>
                Annotation Utility</a>
                    </li>
                               
        <li>
    
                                                <a href="../commons/genericsutil.html" title="Generics Utility">
                    <i class="none"></i>
                Generics Utility</a>
                    </li>
                               
        <li>
    
                                                <a href="../commons/hippoutil.html" title="Hippo Utility">
                    <i class="none"></i>
                Hippo Utility</a>
                    </li>
                               
        <li>
    
                                                <a href="../commons/repositoryutil.html" title="Repository Utility">
                    <i class="none"></i>
                Repository Utility</a>
                    </li>
                               
        <li>
    
                                                <a href="../commons/nodeutil.html" title="Node Utility">
                    <i class="none"></i>
                Node Utility</a>
                    </li>
                               
        <li>
    
                                                <a href="../commons/ftpclient.html" title="FTP Client">
                    <i class="none"></i>
                FTP Client</a>
                    </li>
                               
        <li>
    
                                                <a href="../commons/jcrmockup.html" title="JCR Mockup">
                    <i class="none"></i>
                JCR Mockup</a>
                    </li>
                                                            <li class="nav-header">HST module</li>
                                                           
        <li>
    
                                                <a href="../hst/computil.html" title="CompUtil">
                    <i class="none"></i>
                CompUtil</a>
                    </li>
                               
        <li>
    
                                                <a href="../hst/components.html" title="Components">
                    <i class="none"></i>
                Components</a>
                    </li>
                               
        <li>
    
                                                <a href="../hst/cookie.html" title="Cookie Check">
                    <i class="none"></i>
                Cookie Check</a>
                    </li>
                               
        <li>
    
                                                <a href="../hst/paging.html" title="Paging">
                    <i class="none"></i>
                Paging</a>
                    </li>
                               
        <li>
    
                                                <a href="../hst/xmlstripper.html" title="XMLStripper">
                    <i class="none"></i>
                XMLStripper</a>
                    </li>
                                                            <li class="nav-header">Repository module</li>
                                                           
        <li>
    
                                                <a href="../repository/base-updater.html" title="Base Updater Module">
                    <i class="none"></i>
                Base Updater Module</a>
                    </li>
                               
        <li>
    
                                                <a href="../repository/annotation-updater.html" title="Annotation Base Updater Module">
                    <i class="none"></i>
                Annotation Base Updater Module</a>
                    </li>
                                                            <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
        <li>
    
                                                <a href="../project-info.html" title="Project Information">
                    <i class="icon-chevron-right"></i>
                Project Information</a>
                                </li>
                                                                                                                                                                                                           
        <li>
    
                                                <a href="../project-reports.html" title="Project Reports">
                    <i class="icon-chevron-right"></i>
                Project Reports</a>
                                </li>
                        </ul>

                
                <hr class="divider"/>

                <div id="poweredBy">
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png"/>
        </a>
                            </div>
            </div>
        </div>
    
        
        <div id="bodyColumn"  class="span9" >
                                
            <!-- Copyright 2012-2013 Hippo B.V. (http://www.onehippo.com)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. -->
  
    <p style="color:red">
      <b>This component is only available until version 1.01.xx.
        In Hippo 7.9 similar functionality is available in the core.
        See <a class="externalLink" href="http://www.onehippo.org/library/concepts/hippo-services/repository-scheduler.html">Repository Scheduler service</a></b>
    </p>
    
<div class="section">
<h2>Scheduler Daemon<a name="Scheduler_Daemon"></a></h2>
      
<div class="section">
<h3>SchedulerDaemon implements DaemonModule<a name="SchedulerDaemon_implements_DaemonModule"></a></h3>
        
<p>With the SchedulerDaemon you are able to implement Quartz jobs in your project
            and schedule them in the repository by configuration.</p>
        
<div class="section">
<div class="section">
<h5>Step 1: add the SchedulerDaemon to the content module<a name="Step_1:_add_the_SchedulerDaemon_to_the_content_module"></a></h5>
        
<p>In manifestEntries of the maven-jar-plugin in the content jar's pom, add the SchedulerDaemon as Hippo Module:</p>
        
<div class="source"><pre class="prettyprint linenums">
  &lt;manifestEntries&gt;
    &lt;hippo-modules&gt;org.onehippo.forge.utilities.repository.scheduler.SchedulerDaemon&lt;/hippo-modules&gt;
  &lt;/manifestEntries&gt;</pre></div>
        </div>
<div class="section">
<h5>Step 2: add SchedulerDaemon configuration to the repository<a name="Step_2:_add_SchedulerDaemon_configuration_to_the_repository"></a></h5>
        
<p>Scheduler configuration is present as a node of type <tt>scheduler:scheduler</tt> in the repository. Add such node
        in your content module as xml, with of course the accompanying reference in hippoecm-extension.xml</p>
          
<div class="source"><pre class="prettyprint linenums">
&lt;sv:node xmlns:sv=&quot;http://www.jcp.org/jcr/sv/1.0&quot; sv:name=&quot;demoScheduler&quot;&gt;
  &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
    &lt;sv:value&gt;scheduler:scheduler&lt;/sv:value&gt;
  &lt;/sv:property&gt;
  &lt;sv:property sv:name=&quot;scheduler:active&quot; sv:type=&quot;Boolean&quot;&gt;
    &lt;sv:value&gt;true&lt;/sv:value&gt;
  &lt;/sv:property&gt;
  &lt;sv:node sv:name=&quot;demoJobSchedulerGroup&quot;&gt;
    &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
      &lt;sv:value&gt;scheduler:jobScheduleGroup&lt;/sv:value&gt;
    &lt;/sv:property&gt;
    &lt;sv:property sv:name=&quot;scheduler:active&quot; sv:type=&quot;Boolean&quot;&gt;
      &lt;sv:value&gt;true&lt;/sv:value&gt;
    &lt;/sv:property&gt;
    &lt;sv:node sv:name=&quot;demoJobSchedule&quot;&gt;
      &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
        &lt;sv:value&gt;scheduler:jobSchedule&lt;/sv:value&gt;
      &lt;/sv:property&gt;
      &lt;sv:property sv:name=&quot;scheduler:active&quot; sv:type=&quot;Boolean&quot;&gt;
        &lt;sv:value&gt;true&lt;/sv:value&gt;
      &lt;/sv:property&gt;
      &lt;sv:property sv:name=&quot;scheduler:jobClassName&quot; sv:type=&quot;String&quot;&gt;
        &lt;sv:value&gt;org.onehippo.forge.utilities.repository.scheduler.tester.TesterJob&lt;/sv:value&gt;
      &lt;/sv:property&gt;
      &lt;sv:property sv:name=&quot;scheduler:runInstantly&quot; sv:type=&quot;Boolean&quot;&gt;
        &lt;sv:value&gt;false&lt;/sv:value&gt;
      &lt;/sv:property&gt;
      &lt;sv:property sv:name=&quot;scheduler:cronExpression&quot; sv:type=&quot;String&quot;&gt;
        &lt;sv:value&gt;0 0/1 * 1/1 * ? *&lt;/sv:value&gt;
      &lt;/sv:property&gt;
      &lt;sv:node sv:name=&quot;scheduler:jobConfiguration&quot;&gt;..[see example xml]..&lt;/sv:node&gt;
    &lt;/sv:node&gt;
  &lt;/sv:node&gt;
&lt;/sv:node&gt;</pre></div>
        </div>
<div class="section">
<h5>Step 3: activate the scheduler in properties<a name="Step_3:_activate_the_scheduler_in_properties"></a></h5>
        
<p>On behalf of clustered setup, the scheduler reads from a properties file to activate or not.
          You can specify a properties file with a system property <br /><tt>-Dscheduler.properties</tt> or by adding a file <tt>project.properties</tt>
          to the classpath, e.g. in the CMS's resources directory. Note that if the property file is not found, the scheduler is
          deactivated. In the file, add the following property:</p>
        
<div class="source"><pre class="prettyprint linenums">
  # alternative to having this built-in resource file is to provide it by means
  # of the following system property: -Dscheduler.properties
  org.onehippo.forge.utilities.repository.scheduler.SchedulerDaemon.active=true</pre></div>
        </div>
<div class="section">
<h5>Step 4: write and configure your own job.<a name="Step_4:_write_and_configure_your_own_job."></a></h5>
        
<p>The example configuration configures the TesterJob. It does nothing but read and log it's configuration. Once you see
        it up and running, you are ready to write your own job, extending from <tt>org.onehippo.forge.utilities.repository.scheduler.BaseJob</tt></p>
      </div></div></div>
    </div>
  

            </div>
        </div>
    </div>

    <hr/>

    <footer>
                <div class="container-fluid">
                <div class="row span12">Copyright &copy;                                                2011-2017
                                            <a href="http://www.onehippo.com/">Hippo B.V. (http://www.onehippo.com)</a>.
                        All Rights Reserved.            
                                        
            </div>

        
        
                </div>
    </footer>
</body>
</html>
